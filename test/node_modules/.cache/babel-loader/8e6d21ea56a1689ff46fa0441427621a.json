{"ast":null,"code":"var _jsxFileName = \"/root/molcam3/noMajor/test/src/ImageUpload.js\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useState } from 'react';\nimport axios from 'axios';\nimport Gallery from \"react-photo-gallery\";\nimport styles from \"./photo.css\";\nimport { Row, Form, Button } from \"react-bootstrap\";\nimport $ from \"jquery\";\nimport \"jquery.cookie\"; //import photos from \"./photo\"\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst headers = {\n  withCredentials: true\n};\nvar photos = [{\n  src: \"https://source.unsplash.com/2ShvY8Lf6l0/1600x1200\",\n  srcSet: [\"https://source.unsplash.com/2ShvY8Lf6l0/500x375 500w\", \"https://source.unsplash.com/2ShvY8Lf6l0/800x600 800w\", \"https://source.unsplash.com/2ShvY8Lf6l0/1024x768 1024w\", \"https://source.unsplash.com/2ShvY8Lf6l0/1600x1200 1600w\"],\n  sizes: [\"(min-width: 480px) 50vw,(min-width: 1024px) 33.3vw,100vw\"],\n  width: 4,\n  height: 3\n}];\n/* popout the browser and maximize to see more rows! -> */\n\nfunction ImageUpload(props) {\n  _s();\n\n  const selectedFile = useState(null);\n  const [currentImage, setCurrentImage] = useState(0);\n  const [viewerIsOpen, setViewerIsOpen] = useState(false);\n  const openLightbox = useCallback((event, {\n    photo,\n    index\n  }) => {\n    setCurrentImage(index);\n    setViewerIsOpen(true);\n  }, []);\n\n  const closeLightbox = () => {\n    setCurrentImage(0);\n    setViewerIsOpen(false);\n  };\n\n  useEffect(() => {\n    axios.get(\"http://192.249.18.153:80/image/\").then(res => {\n      console.log(res);\n      let url = res.config.url.replace(\"/image\", \"\");\n\n      for (var i in res.data.image) {\n        photos.push({\n          src: url + res.data.image[i],\n          width: 1,\n          height: 1\n        });\n      }\n\n      console.log(photos);\n    });\n  }, []);\n  /* popout the browser and maximize to see more rows! -> */\n\n  var handleFileInput = e => {\n    this.setState({\n      selectedFile: e.target.files[0]\n    });\n  };\n\n  var handlePost = () => {\n    let formData = new FormData();\n    const config = {\n      header: {\n        'content-type': 'multipart/form-data'\n      }\n    };\n    formData.append(\"file\", this.state.selectedFile);\n    return axios.post(\"http://192.249.18.153:80/image/upload\", formData, config).then(res => {\n      console.log(res);\n      alert(res.data.success ? '성공' : '오류');\n      window.location.reload();\n    }).catch(err => {\n      console.log(err);\n      alert('실패');\n    }).then(() => window.location.reload());\n  };\n\n  const divStyle = {\n    marginTop: 20,\n    marginRight: 200,\n    marginLeft: 200\n  };\n  return render( /*#__PURE__*/_jsxDEV(\"div\", {\n    style: divStyle,\n    children: [\"\\uC5EC\\uAE30\\uC5D0 \\uB123\\uACE0 \\uC2F6\\uC740 \\uC0AC\\uC9C4\\uC744 \\uB123\\uC5B4\\uC8FC\\uC138\\uC694!\", /*#__PURE__*/_jsxDEV(Form.Group, {\n      controlId: \"formFile\",\n      className: \"mb-3\",\n      children: [/*#__PURE__*/_jsxDEV(Form.Label, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n        type: \"file\",\n        onChange: e => this.handleFileInput(e)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"button\",\n        onClick: () => this.handlePost(),\n        size: \"sm\",\n        children: \"\\uC0AC\\uC9C4 \\uC5C5\\uB85C\\uB4DC\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Gallery, {\n      photos: photos,\n      originalClass: styles.image\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 7\n  }, this));\n}\n\n_s(ImageUpload, \"L/TKLjXS0Dveo5x5YiMy0M1yw9Q=\");\n\n_c = ImageUpload;\nexport default ImageUpload;\n\nvar _c;\n\n$RefreshReg$(_c, \"ImageUpload\");","map":{"version":3,"sources":["/root/molcam3/noMajor/test/src/ImageUpload.js"],"names":["React","useCallback","useEffect","useState","axios","Gallery","styles","Row","Form","Button","$","headers","withCredentials","photos","src","srcSet","sizes","width","height","ImageUpload","props","selectedFile","currentImage","setCurrentImage","viewerIsOpen","setViewerIsOpen","openLightbox","event","photo","index","closeLightbox","get","then","res","console","log","url","config","replace","i","data","image","push","handleFileInput","e","setState","target","files","handlePost","formData","FormData","header","append","state","post","alert","success","window","location","reload","catch","err","divStyle","marginTop","marginRight","marginLeft","render"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react'\nimport axios from 'axios';\nimport Gallery from \"react-photo-gallery\";\nimport styles from \"./photo.css\"\nimport {Row, Form, Button} from \"react-bootstrap\";\nimport $ from \"jquery\";\nimport {} from \"jquery.cookie\";\n//import photos from \"./photo\"\n\nconst headers = { withCredentials: true };\n\nvar photos = [{\n  src: \"https://source.unsplash.com/2ShvY8Lf6l0/1600x1200\",\n  srcSet: [\n    \"https://source.unsplash.com/2ShvY8Lf6l0/500x375 500w\",\n    \"https://source.unsplash.com/2ShvY8Lf6l0/800x600 800w\",\n    \"https://source.unsplash.com/2ShvY8Lf6l0/1024x768 1024w\",\n    \"https://source.unsplash.com/2ShvY8Lf6l0/1600x1200 1600w\"\n  ],\n  sizes: [\"(min-width: 480px) 50vw,(min-width: 1024px) 33.3vw,100vw\"],\n  width: 4,\n  height: 3\n}];\n\n/* popout the browser and maximize to see more rows! -> */\n\nfunction ImageUpload(props) {\n  \n  const selectedFile = useState(null);\n  const [currentImage, setCurrentImage] = useState(0);\n  const [viewerIsOpen, setViewerIsOpen] = useState(false);\n\n  const openLightbox = useCallback((event, { photo, index }) => {\n    setCurrentImage(index);\n    setViewerIsOpen(true);\n  }, []);\n\n  const closeLightbox = () => {\n    setCurrentImage(0);\n    setViewerIsOpen(false);\n  };\n\n\n  useEffect(() => {\n    axios.get(\"http://192.249.18.153:80/image/\").then(res => {\n      console.log(res);\n      let url = res.config.url.replace(\"/image\",\"\")\n      for(var i in res.data.image) {\n          photos.push({src:url+res.data.image[i],\n          width: 1,\n          height: 1\n          });\n      }\n        \n      console.log(photos);\n      })\n  },[]);\n\n  /* popout the browser and maximize to see more rows! -> */\n  \n  \n  \n\n\n\n  var handleFileInput = (e) => {\n    this.setState({\n      selectedFile : e.target.files[0],\n    })\n  }\n  \n  var handlePost = () => {\n    let formData = new FormData;\n    const config = {\n\t    header: {'content-type': 'multipart/form-data'}\n    }\n    formData.append(\"file\", this.state.selectedFile);\n    return axios.post(\"http://192.249.18.153:80/image/upload\", formData,config).then(res => {\n    console.log(res)\n      alert(res.data.success ? '성공':'오류')\n      window.location.reload();\n    }).catch(err => {\n        console.log(err)\n      alert('실패')\n    }).then(() => window.location.reload())\n  }\n\n  \n  const divStyle = {\n      marginTop: 20,\n      marginRight: 200,\n      marginLeft:200 \n  };\n    return render(\n\n      <div style={divStyle}>\n        여기에 넣고 싶은 사진을 넣어주세요!\n        <Form.Group controlId=\"formFile\" className=\"mb-3\">\n          <Form.Label></Form.Label>\n          <Form.Control type=\"file\" onChange={e => this.handleFileInput(e)}/>\n          <Button type=\"button\" onClick={() => this.handlePost()} size = \"sm\">사진 업로드</Button>\n        </Form.Group>\n       \n        <Gallery  photos={photos} originalClass={styles.image}/>\n        \n      </div>\n    )\n  \n}\n\nexport default ImageUpload;"]},"metadata":{},"sourceType":"module"}