{"ast":null,"code":"/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\nimport * as React from 'react';\nimport { getEditorNamespace } from 'ckeditor4-integrations-common';\nimport * as PropTypes from 'prop-types';\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\nfunction __spreadArray(to, from) {\n  for (var i = 0, il = from.length, j = to.length; i < il; i++, j++) to[j] = from[i];\n\n  return to;\n}\n\nvar events = ['activeEnterModeChange', 'activeFilterChange', 'afterCommandExec', 'afterInsertHtml', 'afterPaste', 'afterPasteFromWord', 'afterSetData', 'afterUndoImage', 'ariaEditorHelpLabel', 'ariaWidget', 'autogrow', 'beforeCommandExec', 'beforeDestroy', 'beforeGetData', 'beforeModeUnload', 'beforeSetMode', 'beforeUndoImage', 'blur', 'change', 'configLoaded', 'contentDirChanged', 'contentDom', 'contentDomInvalidated', 'contentDomUnload', 'contentPreview', 'customConfigLoaded', 'dataFiltered', 'dataReady', 'destroy', 'dialogHide', 'dialogShow', 'dirChanged', 'doubleclick', 'dragend', 'dragstart', 'drop', 'elementsPathUpdate', 'exportPdf', 'fileUploadRequest', 'fileUploadResponse', 'floatingSpaceLayout', 'focus', 'getData', 'getSnapshot', 'insertElement', 'insertHtml', 'insertText', 'instanceReady', 'key', 'langLoaded', 'loadSnapshot', 'loaded', 'lockSnapshot', 'maximize', 'menuShow', 'mode', 'notificationHide', 'notificationShow', 'notificationUpdate', 'paste', 'pasteFromWord', 'pluginsLoaded', 'readOnly', 'removeFormatCleanup', 'required', 'resize', 'save', 'saveSnapshot', 'selectionChange', 'setData', 'stylesRemove', 'stylesSet', 'template', 'toDataFormat', 'toHtml', 'uiSpace', 'unlockSnapshot', 'updateSnapshot', 'widgetDefinition'];\nvar namespaceEvents = ['beforeLoad', 'namespaceLoaded'];\n\nvar defaultEvents = __spreadArray(__spreadArray([], events), namespaceEvents);\n\nvar EVENT_PREFIX = '__CKE__';\n\nfunction prefixEventName(evtName) {\n  return \"\" + EVENT_PREFIX + evtName;\n}\n\nfunction stripPrefix(prefixedEventName) {\n  return prefixedEventName.substr(EVENT_PREFIX.length);\n}\n\nfunction eventNameToHandlerName(evtName) {\n  var cap = evtName.substr(0, 1).toUpperCase() + evtName.substr(1);\n  return \"on\" + cap;\n}\n\nfunction handlerNameToEventName(handlerName) {\n  return handlerName.substr(2, 1).toLowerCase() + handlerName.substr(3);\n}\n\nvar CKEditorEventAction = __spreadArray(__spreadArray([], events), namespaceEvents).reduce(function (acc, evtName) {\n  var _a;\n\n  return __assign(__assign({}, acc), (_a = {}, _a[evtName] = prefixEventName(evtName), _a));\n}, {});\n\nfunction camelToKebab(str) {\n  return str.split(/(?=[A-Z])/).join('-').toLowerCase();\n}\n\nfunction uniqueName() {\n  return Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 5);\n}\n\nfunction getStyle(type, status, style) {\n  var hidden = {\n    display: 'none',\n    visibility: 'hidden'\n  };\n\n  if (type === 'classic') {\n    return hidden;\n  }\n\n  return status === 'ready' ? style !== null && style !== void 0 ? style : undefined : hidden;\n}\n\nfunction registerEditorEventHandler(_a) {\n  var debug = _a.debug,\n      editor = _a.editor,\n      evtName = _a.evtName,\n      handler = _a.handler,\n      listenerData = _a.listenerData,\n      priority = _a.priority;\n  var handlerId = debug && uniqueName();\n  var _handler = handler;\n\n  if (debug) {\n    _handler = function (args) {\n      console.log({\n        operation: 'invoke',\n        editor: editor.name,\n        evtName: evtName,\n        handlerId: handlerId,\n        data: args.data,\n        listenerData: args.listenerData\n      });\n      handler(args);\n    };\n  }\n\n  if (debug) {\n    console.log({\n      operation: 'register',\n      editor: editor.name,\n      evtName: evtName,\n      handlerId: handlerId\n    });\n  }\n\n  editor.on(evtName, _handler, null, listenerData, priority);\n  return function () {\n    if (debug) {\n      console.log({\n        operation: 'unregister',\n        editor: editor.name,\n        evtName: evtName,\n        handlerId: handlerId\n      });\n    }\n\n    editor.removeListener(evtName, _handler);\n  };\n}\n\nvar useEffect$1 = React.useEffect,\n    useReducer = React.useReducer,\n    useRef$1 = React.useRef;\nvar defEditorUrl = 'https://cdn.ckeditor.com/4.16.1/standard-all/ckeditor.js';\nvar defConfig = {};\n\nfunction useCKEditor(_a) {\n  var config = _a.config,\n      debug = _a.debug,\n      dispatchEvent = _a.dispatchEvent,\n      _b = _a.subscribeTo,\n      subscribeTo = _b === void 0 ? defaultEvents : _b,\n      editorUrl = _a.editorUrl,\n      element = _a.element,\n      _c = _a.type,\n      type = _c === void 0 ? 'classic' : _c;\n  var editorUrlRef = useRef$1(editorUrl || defEditorUrl);\n  var subscribeToRef = useRef$1(subscribeTo !== null && subscribeTo !== void 0 ? subscribeTo : defaultEvents);\n  var debugRef = useRef$1(debug);\n  var dispatchEventRef = useRef$1(dispatchEvent);\n  var configRef = useRef$1(config || defConfig);\n  var typeRef = useRef$1(type);\n\n  var _d = useReducer(reducer, {\n    editor: undefined,\n    hookStatus: 'init'\n  }),\n      _e = _d[0],\n      editor = _e.editor,\n      hookStatus = _e.hookStatus,\n      dispatch = _d[1];\n\n  useEffect$1(function () {\n    if (element && !editor) {\n      dispatch({\n        type: 'loading'\n      });\n\n      var onNamespaceLoaded = function (CKEDITOR) {\n        var _a;\n\n        if (subscribeToRef.current.indexOf('namespaceLoaded') !== -1) {\n          (_a = dispatchEventRef.current) === null || _a === void 0 ? void 0 : _a.call(dispatchEventRef, {\n            type: CKEditorEventAction.namespaceLoaded,\n            payload: CKEDITOR\n          });\n        }\n      };\n\n      var initEditor = function (CKEDITOR) {\n        var _a;\n\n        var isInline = typeRef.current === 'inline';\n        var isReadOnly = configRef.current.readOnly;\n\n        if (subscribeToRef.current.indexOf('beforeLoad') !== -1) {\n          (_a = dispatchEventRef.current) === null || _a === void 0 ? void 0 : _a.call(dispatchEventRef, {\n            type: CKEditorEventAction.beforeLoad,\n            payload: CKEDITOR\n          });\n        }\n\n        var editor = CKEDITOR[isInline ? 'inline' : 'replace'](element, configRef.current);\n        var subscribedEditorEvents = subscribeToRef.current.filter(function (evtName) {\n          return namespaceEvents.indexOf(evtName) === -1;\n        });\n        subscribedEditorEvents.forEach(function (evtName) {\n          registerEditorEventHandler({\n            debug: debugRef.current,\n            editor: editor,\n            evtName: evtName,\n            handler: function (payload) {\n              var _a;\n\n              (_a = dispatchEventRef.current) === null || _a === void 0 ? void 0 : _a.call(dispatchEventRef, {\n                type: \"\" + EVENT_PREFIX + evtName,\n                payload: payload\n              });\n            }\n          });\n        });\n        registerEditorEventHandler({\n          debug: debugRef.current,\n          editor: editor,\n          evtName: 'loaded',\n          handler: function () {\n            dispatch({\n              type: 'loaded'\n            });\n          },\n          priority: -1\n        });\n        registerEditorEventHandler({\n          debug: debugRef.current,\n          editor: editor,\n          evtName: 'instanceReady',\n          handler: function (_a) {\n            var editor = _a.editor;\n            dispatch({\n              type: 'ready'\n            });\n\n            if (isInline && !isReadOnly) {\n              editor.setReadOnly(false);\n            }\n          },\n          priority: -1\n        });\n        registerEditorEventHandler({\n          debug: debugRef.current,\n          editor: editor,\n          evtName: 'destroy',\n          handler: function () {\n            dispatch({\n              type: 'destroyed'\n            });\n          },\n          priority: -1\n        });\n        dispatch({\n          type: 'unloaded',\n          payload: editor\n        });\n      };\n\n      getEditorNamespace(editorUrlRef.current, onNamespaceLoaded).then(initEditor).catch(function (error) {\n        if (process.env.NODE_ENV !== 'test') {\n          console.error(error);\n        }\n\n        dispatch({\n          type: 'error'\n        });\n      });\n    }\n\n    return function () {\n      if (editor) {\n        editor.destroy();\n      }\n    };\n  }, [editor, element]);\n  return {\n    editor: editor,\n    status: editor === null || editor === void 0 ? void 0 : editor.status,\n    error: hookStatus === 'error',\n    loading: hookStatus === 'loading'\n  };\n}\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'init':\n      return __assign(__assign({}, state), {\n        hookStatus: 'init'\n      });\n\n    case 'loading':\n      return __assign(__assign({}, state), {\n        hookStatus: 'loading'\n      });\n\n    case 'unloaded':\n      return {\n        editor: action.payload,\n        hookStatus: 'unloaded'\n      };\n\n    case 'loaded':\n      return __assign(__assign({}, state), {\n        hookStatus: 'loaded'\n      });\n\n    case 'ready':\n      return __assign(__assign({}, state), {\n        hookStatus: 'ready'\n      });\n\n    case 'destroyed':\n      return {\n        editor: undefined,\n        hookStatus: 'destroyed'\n      };\n\n    case 'error':\n      return {\n        editor: undefined,\n        hookStatus: 'error'\n      };\n\n    default:\n      return state;\n  }\n}\n\nvar useEffect = React.useEffect,\n    useRef = React.useRef,\n    useState = React.useState;\n\nfunction CKEditor(_a) {\n  var _b = _a.config,\n      config = _b === void 0 ? {} : _b,\n      debug = _a.debug,\n      editorUrl = _a.editorUrl,\n      initData = _a.initData,\n      name = _a.name,\n      readOnly = _a.readOnly,\n      style = _a.style,\n      type = _a.type,\n      handlers = __rest(_a, [\"config\", \"debug\", \"editorUrl\", \"initData\", \"name\", \"readOnly\", \"style\", \"type\"]);\n\n  var _c = useState(null),\n      element = _c[0],\n      setElement = _c[1];\n\n  var refs = useRef(handlers);\n\n  var dispatchEvent = function (_a) {\n    var type = _a.type,\n        payload = _a.payload;\n    var handlerName = eventNameToHandlerName(stripPrefix(type));\n    var handler = refs.current[handlerName];\n\n    if (handler) {\n      handler(payload);\n    }\n  };\n\n  if (config && typeof readOnly === 'boolean') {\n    config.readOnly = readOnly;\n  }\n\n  var _d = useCKEditor({\n    config: config,\n    dispatchEvent: dispatchEvent,\n    debug: debug,\n    editorUrl: editorUrl,\n    element: element,\n    subscribeTo: Object.keys(handlers).filter(function (key) {\n      return key.indexOf('on') === 0;\n    }).map(handlerNameToEventName),\n    type: type\n  }),\n      editor = _d.editor,\n      status = _d.status;\n\n  useEffect(function () {\n    var canSetStyles = type !== 'inline' && editor && (status === 'loaded' || status === 'ready');\n\n    if (style && canSetStyles) {\n      editor.container.setStyles(style);\n    }\n\n    return function () {\n      if (style && canSetStyles) {\n        Object.keys(style).map(camelToKebab).forEach(function (styleName) {\n          editor.container.removeStyle(styleName);\n        });\n      }\n    };\n  }, [editor, status, style, type]);\n  useEffect(function () {\n    if (editor && status === 'ready' && typeof readOnly === 'boolean') {\n      editor.setReadOnly(readOnly);\n    }\n  }, [editor, status, readOnly]);\n  return React.createElement(\"div\", {\n    id: name !== null && name !== void 0 ? name : undefined,\n    ref: setElement,\n    style: getStyle(type !== null && type !== void 0 ? type : 'classic', status, style)\n  }, initData);\n}\n\nvar propTypes = __assign({\n  config: PropTypes.object,\n  debug: PropTypes.bool,\n  editorUrl: PropTypes.string,\n  initData: PropTypes.node,\n  name: PropTypes.string,\n  readOnly: PropTypes.bool,\n  style: PropTypes.object,\n  type: PropTypes.oneOf(['classic', 'inline'])\n}, defaultEvents.reduce(function (acc, key) {\n  var _a;\n\n  return __assign(__assign({}, acc), (_a = {}, _a[eventNameToHandlerName(key)] = PropTypes.func, _a));\n}, {}));\n\nCKEditor.propTypes = propTypes;\nexport { CKEditor, CKEditorEventAction, prefixEventName, registerEditorEventHandler, stripPrefix, useCKEditor };","map":{"version":3,"sources":["/root/notice_board_web/test/node_modules/ckeditor4-react/dist/index.esm.js"],"names":["React","getEditorNamespace","PropTypes","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__spreadArray","to","from","il","j","events","namespaceEvents","defaultEvents","EVENT_PREFIX","prefixEventName","evtName","stripPrefix","prefixedEventName","substr","eventNameToHandlerName","cap","toUpperCase","handlerNameToEventName","handlerName","toLowerCase","CKEditorEventAction","reduce","acc","_a","camelToKebab","str","split","join","uniqueName","Math","random","toString","replace","getStyle","type","status","style","hidden","display","visibility","undefined","registerEditorEventHandler","debug","editor","handler","listenerData","priority","handlerId","_handler","args","console","log","operation","name","data","on","removeListener","useEffect$1","useEffect","useReducer","useRef$1","useRef","defEditorUrl","defConfig","useCKEditor","config","dispatchEvent","_b","subscribeTo","editorUrl","element","_c","editorUrlRef","subscribeToRef","debugRef","dispatchEventRef","configRef","typeRef","_d","reducer","hookStatus","_e","dispatch","onNamespaceLoaded","CKEDITOR","current","namespaceLoaded","payload","initEditor","isInline","isReadOnly","readOnly","beforeLoad","subscribedEditorEvents","filter","forEach","setReadOnly","then","catch","error","process","env","NODE_ENV","destroy","loading","state","action","useState","CKEditor","initData","handlers","setElement","refs","keys","key","map","canSetStyles","container","setStyles","styleName","removeStyle","createElement","id","ref","propTypes","object","bool","string","node","oneOf","func"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\nimport * as React from 'react';\nimport { getEditorNamespace } from 'ckeditor4-integrations-common';\nimport * as PropTypes from 'prop-types';\n\nvar __assign = function() {\n    __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nfunction __rest(s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n}\nfunction __spreadArray(to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n}\n\nvar events = [\n    'activeEnterModeChange',\n    'activeFilterChange',\n    'afterCommandExec',\n    'afterInsertHtml',\n    'afterPaste',\n    'afterPasteFromWord',\n    'afterSetData',\n    'afterUndoImage',\n    'ariaEditorHelpLabel',\n    'ariaWidget',\n    'autogrow',\n    'beforeCommandExec',\n    'beforeDestroy',\n    'beforeGetData',\n    'beforeModeUnload',\n    'beforeSetMode',\n    'beforeUndoImage',\n    'blur',\n    'change',\n    'configLoaded',\n    'contentDirChanged',\n    'contentDom',\n    'contentDomInvalidated',\n    'contentDomUnload',\n    'contentPreview',\n    'customConfigLoaded',\n    'dataFiltered',\n    'dataReady',\n    'destroy',\n    'dialogHide',\n    'dialogShow',\n    'dirChanged',\n    'doubleclick',\n    'dragend',\n    'dragstart',\n    'drop',\n    'elementsPathUpdate',\n    'exportPdf',\n    'fileUploadRequest',\n    'fileUploadResponse',\n    'floatingSpaceLayout',\n    'focus',\n    'getData',\n    'getSnapshot',\n    'insertElement',\n    'insertHtml',\n    'insertText',\n    'instanceReady',\n    'key',\n    'langLoaded',\n    'loadSnapshot',\n    'loaded',\n    'lockSnapshot',\n    'maximize',\n    'menuShow',\n    'mode',\n    'notificationHide',\n    'notificationShow',\n    'notificationUpdate',\n    'paste',\n    'pasteFromWord',\n    'pluginsLoaded',\n    'readOnly',\n    'removeFormatCleanup',\n    'required',\n    'resize',\n    'save',\n    'saveSnapshot',\n    'selectionChange',\n    'setData',\n    'stylesRemove',\n    'stylesSet',\n    'template',\n    'toDataFormat',\n    'toHtml',\n    'uiSpace',\n    'unlockSnapshot',\n    'updateSnapshot',\n    'widgetDefinition'\n];\nvar namespaceEvents = ['beforeLoad', 'namespaceLoaded'];\nvar defaultEvents = __spreadArray(__spreadArray([], events), namespaceEvents);\nvar EVENT_PREFIX = '__CKE__';\nfunction prefixEventName(evtName) {\n    return \"\" + EVENT_PREFIX + evtName;\n}\nfunction stripPrefix(prefixedEventName) {\n    return prefixedEventName.substr(EVENT_PREFIX.length);\n}\nfunction eventNameToHandlerName(evtName) {\n    var cap = evtName.substr(0, 1).toUpperCase() + evtName.substr(1);\n    return \"on\" + cap;\n}\nfunction handlerNameToEventName(handlerName) {\n    return handlerName.substr(2, 1).toLowerCase() + handlerName.substr(3);\n}\nvar CKEditorEventAction = __spreadArray(__spreadArray([], events), namespaceEvents).reduce(function (acc, evtName) {\n    var _a;\n    return __assign(__assign({}, acc), (_a = {}, _a[evtName] = prefixEventName(evtName), _a));\n}, {});\n\nfunction camelToKebab(str) {\n    return str\n        .split(/(?=[A-Z])/)\n        .join('-')\n        .toLowerCase();\n}\nfunction uniqueName() {\n    return Math.random()\n        .toString(36)\n        .replace(/[^a-z]+/g, '')\n        .substr(0, 5);\n}\nfunction getStyle(type, status, style) {\n    var hidden = { display: 'none', visibility: 'hidden' };\n    if (type === 'classic') {\n        return hidden;\n    }\n    return status === 'ready' ? style !== null && style !== void 0 ? style : undefined : hidden;\n}\n\nfunction registerEditorEventHandler(_a) {\n    var debug = _a.debug, editor = _a.editor, evtName = _a.evtName, handler = _a.handler, listenerData = _a.listenerData, priority = _a.priority;\n    var handlerId = debug && uniqueName();\n    var _handler = handler;\n    if (debug) {\n        _handler = function (args) {\n            console.log({\n                operation: 'invoke',\n                editor: editor.name,\n                evtName: evtName,\n                handlerId: handlerId,\n                data: args.data,\n                listenerData: args.listenerData\n            });\n            handler(args);\n        };\n    }\n    if (debug) {\n        console.log({\n            operation: 'register',\n            editor: editor.name,\n            evtName: evtName,\n            handlerId: handlerId\n        });\n    }\n    editor.on(evtName, _handler, null, listenerData, priority);\n    return function () {\n        if (debug) {\n            console.log({\n                operation: 'unregister',\n                editor: editor.name,\n                evtName: evtName,\n                handlerId: handlerId\n            });\n        }\n        editor.removeListener(evtName, _handler);\n    };\n}\n\nvar useEffect$1 = React.useEffect, useReducer = React.useReducer, useRef$1 = React.useRef;\nvar defEditorUrl = 'https://cdn.ckeditor.com/4.16.1/standard-all/ckeditor.js';\nvar defConfig = {};\nfunction useCKEditor(_a) {\n    var config = _a.config, debug = _a.debug, dispatchEvent = _a.dispatchEvent, _b = _a.subscribeTo, subscribeTo = _b === void 0 ? defaultEvents : _b, editorUrl = _a.editorUrl, element = _a.element, _c = _a.type, type = _c === void 0 ? 'classic' : _c;\n    var editorUrlRef = useRef$1(editorUrl || defEditorUrl);\n    var subscribeToRef = useRef$1(subscribeTo !== null && subscribeTo !== void 0 ? subscribeTo : defaultEvents);\n    var debugRef = useRef$1(debug);\n    var dispatchEventRef = useRef$1(dispatchEvent);\n    var configRef = useRef$1(config || defConfig);\n    var typeRef = useRef$1(type);\n    var _d = useReducer(reducer, {\n        editor: undefined,\n        hookStatus: 'init'\n    }), _e = _d[0], editor = _e.editor, hookStatus = _e.hookStatus, dispatch = _d[1];\n    useEffect$1(function () {\n        if (element && !editor) {\n            dispatch({ type: 'loading' });\n            var onNamespaceLoaded = function (CKEDITOR) {\n                var _a;\n                if (subscribeToRef.current.indexOf('namespaceLoaded') !== -1) {\n                    (_a = dispatchEventRef.current) === null || _a === void 0 ? void 0 : _a.call(dispatchEventRef, {\n                        type: CKEditorEventAction.namespaceLoaded,\n                        payload: CKEDITOR\n                    });\n                }\n            };\n            var initEditor = function (CKEDITOR) {\n                var _a;\n                var isInline = typeRef.current === 'inline';\n                var isReadOnly = configRef.current.readOnly;\n                if (subscribeToRef.current.indexOf('beforeLoad') !== -1) {\n                    (_a = dispatchEventRef.current) === null || _a === void 0 ? void 0 : _a.call(dispatchEventRef, {\n                        type: CKEditorEventAction.beforeLoad,\n                        payload: CKEDITOR\n                    });\n                }\n                var editor = CKEDITOR[isInline ? 'inline' : 'replace'](element, configRef.current);\n                var subscribedEditorEvents = subscribeToRef.current.filter(function (evtName) { return namespaceEvents.indexOf(evtName) === -1; });\n                subscribedEditorEvents.forEach(function (evtName) {\n                    registerEditorEventHandler({\n                        debug: debugRef.current,\n                        editor: editor,\n                        evtName: evtName,\n                        handler: function (payload) {\n                            var _a;\n                            (_a = dispatchEventRef.current) === null || _a === void 0 ? void 0 : _a.call(dispatchEventRef, {\n                                type: \"\" + EVENT_PREFIX + evtName,\n                                payload: payload\n                            });\n                        }\n                    });\n                });\n                registerEditorEventHandler({\n                    debug: debugRef.current,\n                    editor: editor,\n                    evtName: 'loaded',\n                    handler: function () {\n                        dispatch({ type: 'loaded' });\n                    },\n                    priority: -1\n                });\n                registerEditorEventHandler({\n                    debug: debugRef.current,\n                    editor: editor,\n                    evtName: 'instanceReady',\n                    handler: function (_a) {\n                        var editor = _a.editor;\n                        dispatch({ type: 'ready' });\n                        if (isInline && !isReadOnly) {\n                            editor.setReadOnly(false);\n                        }\n                    },\n                    priority: -1\n                });\n                registerEditorEventHandler({\n                    debug: debugRef.current,\n                    editor: editor,\n                    evtName: 'destroy',\n                    handler: function () {\n                        dispatch({ type: 'destroyed' });\n                    },\n                    priority: -1\n                });\n                dispatch({\n                    type: 'unloaded',\n                    payload: editor\n                });\n            };\n            getEditorNamespace(editorUrlRef.current, onNamespaceLoaded)\n                .then(initEditor)\n                .catch(function (error) {\n                if (process.env.NODE_ENV !== 'test') {\n                    console.error(error);\n                }\n                dispatch({ type: 'error' });\n            });\n        }\n        return function () {\n            if (editor) {\n                editor.destroy();\n            }\n        };\n    }, [editor, element]);\n    return {\n        editor: editor,\n        status: editor === null || editor === void 0 ? void 0 : editor.status,\n        error: hookStatus === 'error',\n        loading: hookStatus === 'loading'\n    };\n}\nfunction reducer(state, action) {\n    switch (action.type) {\n        case 'init':\n            return __assign(__assign({}, state), { hookStatus: 'init' });\n        case 'loading':\n            return __assign(__assign({}, state), { hookStatus: 'loading' });\n        case 'unloaded':\n            return {\n                editor: action.payload,\n                hookStatus: 'unloaded'\n            };\n        case 'loaded':\n            return __assign(__assign({}, state), { hookStatus: 'loaded' });\n        case 'ready':\n            return __assign(__assign({}, state), { hookStatus: 'ready' });\n        case 'destroyed':\n            return {\n                editor: undefined,\n                hookStatus: 'destroyed'\n            };\n        case 'error':\n            return {\n                editor: undefined,\n                hookStatus: 'error'\n            };\n        default:\n            return state;\n    }\n}\n\nvar useEffect = React.useEffect, useRef = React.useRef, useState = React.useState;\nfunction CKEditor(_a) {\n    var _b = _a.config, config = _b === void 0 ? {} : _b, debug = _a.debug, editorUrl = _a.editorUrl, initData = _a.initData, name = _a.name, readOnly = _a.readOnly, style = _a.style, type = _a.type,\n    handlers = __rest(_a, [\"config\", \"debug\", \"editorUrl\", \"initData\", \"name\", \"readOnly\", \"style\", \"type\"]);\n    var _c = useState(null), element = _c[0], setElement = _c[1];\n    var refs = useRef(handlers);\n    var dispatchEvent = function (_a) {\n        var type = _a.type, payload = _a.payload;\n        var handlerName = eventNameToHandlerName(stripPrefix(type));\n        var handler = refs.current[handlerName];\n        if (handler) {\n            handler(payload);\n        }\n    };\n    if (config && typeof readOnly === 'boolean') {\n        config.readOnly = readOnly;\n    }\n    var _d = useCKEditor({\n        config: config,\n        dispatchEvent: dispatchEvent,\n        debug: debug,\n        editorUrl: editorUrl,\n        element: element,\n        subscribeTo: Object.keys(handlers)\n            .filter(function (key) { return key.indexOf('on') === 0; })\n            .map(handlerNameToEventName),\n        type: type\n    }), editor = _d.editor, status = _d.status;\n    useEffect(function () {\n        var canSetStyles = type !== 'inline' &&\n            editor &&\n            (status === 'loaded' || status === 'ready');\n        if (style && canSetStyles) {\n            editor.container.setStyles(style);\n        }\n        return function () {\n            if (style && canSetStyles) {\n                Object.keys(style)\n                    .map(camelToKebab)\n                    .forEach(function (styleName) {\n                    editor.container.removeStyle(styleName);\n                });\n            }\n        };\n    }, [editor, status, style, type]);\n    useEffect(function () {\n        if (editor && status === 'ready' && typeof readOnly === 'boolean') {\n            editor.setReadOnly(readOnly);\n        }\n    }, [editor, status, readOnly]);\n    return (React.createElement(\"div\", { id: name !== null && name !== void 0 ? name : undefined, ref: setElement, style: getStyle(type !== null && type !== void 0 ? type : 'classic', status, style) }, initData));\n}\nvar propTypes = __assign({\n    config: PropTypes.object,\n    debug: PropTypes.bool,\n    editorUrl: PropTypes.string,\n    initData: PropTypes.node,\n    name: PropTypes.string,\n    readOnly: PropTypes.bool,\n    style: PropTypes.object,\n    type: PropTypes.oneOf(['classic', 'inline']) }, defaultEvents.reduce(function (acc, key) {\n    var _a;\n    return __assign(__assign({}, acc), (_a = {}, _a[eventNameToHandlerName(key)] = PropTypes.func, _a));\n}, {}));\nCKEditor.propTypes = propTypes;\n\nexport { CKEditor, CKEditorEventAction, prefixEventName, registerEditorEventHandler, stripPrefix, useCKEditor };\n"]},"metadata":{},"sourceType":"module"}