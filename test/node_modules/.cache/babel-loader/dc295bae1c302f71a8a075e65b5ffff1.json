{"ast":null,"code":"var _jsxFileName = \"/root/molcam3/noMajor/test/src/ImageUpload.js\";\nimport React, { Component, useEffect } from 'react';\nimport axios from 'axios';\nimport Gallery from \"react-photo-gallery\";\nimport styles from \"./photo.css\";\nimport { Row, Form, Button } from \"react-bootstrap\"; //import photos from \"./photo\"\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst headers = {\n  withCredentials: true\n};\nvar photos = [];\n/* popout the browser and maximize to see more rows! -> */\n\nclass ImageUpload extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedFile: null\n    };\n  }\n\n  componentDidMount() {\n    /* popout the browser and maximize to see more rows! -> */\n    axios.get(\"http://192.249.18.153:80/image/\").then(res => {\n      console.log(res);\n      let url = res.config.url.replace(\"/image\", \"\");\n\n      for (var i in res.data.image) {\n        photos.push({\n          src: url + res.data.image[i],\n          width: 400,\n          height: 300\n        });\n      }\n\n      console.log(photos);\n    });\n  }\n\n  componentWillReceiveProps() {\n    /* popout the browser and maximize to see more rows! -> */\n    axios.get(\"http://192.249.18.153:80/image/\").then(res => {\n      console.log(res);\n      let url = res.config.url.replace(\"/image\", \"\");\n\n      for (var i in res.data.image) {\n        photos.push({\n          src: url + res.data.image[i],\n          width: 4,\n          height: 3\n        });\n      }\n\n      console.log(photos);\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    console.log(typeof prevProps.photo);\n\n    if (prevProps.photos.length !== this.props.photos.length) {\n      window.location.reload();\n    }\n  }\n\n  handleFileInput(e) {\n    this.setState({\n      selectedFile: e.target.files[0]\n    });\n  }\n\n  handlePost() {\n    let formData = new FormData();\n    const config = {\n      header: {\n        'content-type': 'multipart/form-data'\n      }\n    };\n    formData.append(\"file\", this.state.selectedFile);\n    return axios.post(\"http://192.249.18.153:80/image/upload\", formData, config).then(res => {\n      console.log(res);\n      alert(res.data.success ? '성공' : '오류');\n      window.location.reload();\n    }).catch(err => {\n      console.log(err);\n      alert('실패');\n    });\n  }\n\n  render() {\n    const divStyle = {\n      marginTop: 20,\n      marginRight: 200,\n      marginLeft: 200\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: divStyle,\n      children: [\"\\uC5EC\\uAE30\\uC5D0 \\uB123\\uACE0 \\uC2F6\\uC740 \\uC0AC\\uC9C4\\uC744 \\uB123\\uC5B4\\uC8FC\\uC138\\uC694!\", /*#__PURE__*/_jsxDEV(Form.Group, {\n        controlId: \"formFile\",\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"file\",\n          onChange: e => this.handleFileInput(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"button\",\n          onClick: () => this.handlePost(),\n          size: \"sm\",\n          children: \"\\uC0AC\\uC9C4 \\uC5C5\\uB85C\\uB4DC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Gallery, {\n        photos: photos,\n        originalClass: styles.image\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default ImageUpload;","map":{"version":3,"sources":["/root/molcam3/noMajor/test/src/ImageUpload.js"],"names":["React","Component","useEffect","axios","Gallery","styles","Row","Form","Button","headers","withCredentials","photos","ImageUpload","constructor","props","state","selectedFile","componentDidMount","get","then","res","console","log","url","config","replace","i","data","image","push","src","width","height","componentWillReceiveProps","componentDidUpdate","prevProps","prevState","photo","length","window","location","reload","handleFileInput","e","setState","target","files","handlePost","formData","FormData","header","append","post","alert","success","catch","err","render","divStyle","marginTop","marginRight","marginLeft"],"mappings":"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","sourcesContent":["import React, { Component,useEffect } from 'react'\nimport axios from 'axios';\nimport Gallery from \"react-photo-gallery\";\nimport styles from \"./photo.css\"\nimport {Row, Form, Button} from \"react-bootstrap\";\n//import photos from \"./photo\"\n\nconst headers = { withCredentials: true };\n\nvar photos = [\n  \n];\n\n/* popout the browser and maximize to see more rows! -> */\n\n\nclass ImageUpload extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      selectedFile: null,\n    }\n  }\n  \ncomponentDidMount() {\n  \n\n/* popout the browser and maximize to see more rows! -> */\n\naxios.get(\"http://192.249.18.153:80/image/\").then(res => {\n    console.log(res);\n    let url = res.config.url.replace(\"/image\",\"\")\n    for(var i in res.data.image) {\n        photos.push({src:url+res.data.image[i],\n        width: 400,\n        height: 300\n        });\n    }\n      \n    console.log(photos);\n    })\n}\n\ncomponentWillReceiveProps() {\n  \n\n  /* popout the browser and maximize to see more rows! -> */\n  \n  axios.get(\"http://192.249.18.153:80/image/\").then(res => {\n      console.log(res);\n      let url = res.config.url.replace(\"/image\",\"\")\n      for(var i in res.data.image) {\n          photos.push({src:url+res.data.image[i],\n          width: 4,\n          height: 3\n          });\n      }\n        \n      console.log(photos);\n      })\n  }\n\ncomponentDidUpdate(prevProps,prevState){\n  console.log(typeof(prevProps.photo))\n  if(prevProps.photos.length !== this.props.photos.length){\n    window.location.reload();\n  }\n}\n\n\n\n  handleFileInput(e){\n    this.setState({\n      selectedFile : e.target.files[0],\n    })\n  }\n  \n  handlePost(){\n    let formData = new FormData;\n    const config = {\n\t    header: {'content-type': 'multipart/form-data'}\n    }\n    formData.append(\"file\", this.state.selectedFile);\n    return axios.post(\"http://192.249.18.153:80/image/upload\", formData,config).then(res => {\n    console.log(res)\n      alert(res.data.success ? '성공':'오류')\n      window.location.reload();\n    }).catch(err => {\n        console.log(err)\n      alert('실패')\n    })\n  }\n\n  render() {\n    const divStyle = {\n      marginTop: 20,\n      marginRight: 200,\n      marginLeft:200 \n    };\n    return (\n\n      <div style={divStyle}>\n        여기에 넣고 싶은 사진을 넣어주세요!\n        <Form.Group controlId=\"formFile\" className=\"mb-3\">\n          <Form.Label></Form.Label>\n          <Form.Control type=\"file\" onChange={e => this.handleFileInput(e)}/>\n          <Button type=\"button\" onClick={() => this.handlePost()} size = \"sm\">사진 업로드</Button>\n        </Form.Group>\n       \n        <Gallery photos={photos} originalClass={styles.image}/>\n        \n      </div>\n    )\n  }\n}\n\nexport default ImageUpload;"]},"metadata":{},"sourceType":"module"}